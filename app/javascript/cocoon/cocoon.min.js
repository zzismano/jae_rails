/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@nathanvda/cocoon@1.2.14/cocoon.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(e){var t=0,n=function(){return(new Date).getTime()+t++},a=function(e){return"["+e+"]$1"},o=function(e){return"_"+e+"_$1"};e(document).on("click",".add_fields",(function(t){t.preventDefault(),t.stopPropagation();var i=e(this),r=i.data("association"),s=i.data("associations"),c=i.data("association-insertion-template"),d=i.data("association-insertion-method")||i.data("association-insertion-position")||"before",u=i.data("association-insertion-node"),l=i.data("association-insertion-traversal"),f=parseInt(i.data("count"),10),p=new RegExp("\\[new_"+r+"\\](.*?\\s)","g"),g=new RegExp("_new_"+r+"_(\\w*)","g"),v=n(),m=c.replace(p,a(v)),h=[],_=t;for(m==c&&(p=new RegExp("\\[new_"+s+"\\](.*?\\s)","g"),g=new RegExp("_new_"+s+"_(\\w*)","g"),m=c.replace(p,a(v))),h=[m=m.replace(g,o(v))],f=isNaN(f)?1:Math.max(f,1),f-=1;f;)v=n(),m=(m=c.replace(p,a(v))).replace(g,o(v)),h.push(m),f-=1;var w=function(t,n,a){return t?"function"==typeof t?(n&&console.warn("association-insertion-traversal is ignored, because association-insertion-node is given as a function."),t(a)):"string"==typeof t?n?a[n](t):"this"==t?a:e(t):void 0:a.parent()}(u,l,i);w&&0!=w.length||console.warn("Couldn't find the element to insert the template. Make sure your `data-association-insertion-*` on `link_to_add_association` is correct."),e.each(h,(function(t,n){var a=e(n),o=jQuery.Event("cocoon:before-insert");if(w.trigger(o,[a,_]),!o.isDefaultPrevented()){w[d](a);w.trigger("cocoon:after-insert",[a,_])}}))})),e(document).on("click",".remove_fields.dynamic, .remove_fields.existing",(function(t){var n=e(this),a=n.data("wrapper-class")||"nested-fields",o=n.closest("."+a),i=o.parent(),r=t;t.preventDefault(),t.stopPropagation();var s=jQuery.Event("cocoon:before-remove");if(i.trigger(s,[o,r]),!s.isDefaultPrevented()){var c=i.data("remove-timeout")||0;setTimeout((function(){n.hasClass("dynamic")?o.detach():(n.prev("input[type=hidden]").val("1"),o.hide()),i.trigger("cocoon:after-remove",[o,r])}),c)}})),e(document).on("ready page:load turbolinks:load",(function(){e(".remove_fields.existing.destroyed").each((function(t,n){var a=e(this),o=a.data("wrapper-class")||"nested-fields";a.closest("."+o).hide()}))}))}(jQuery);
//# sourceMappingURL=/sm/f32e4b1fed19b623b5da02b13e5e65131af8492d479f3705950f48a6fdb4f219.map